<!DOCTYPE html>
<html>
  <head>
    <title>Visibility Point</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= favicon_link_tag asset_path('logo.png') %>

    <%= javascript_importmap_tags %>
  </head>
  <body>
    <% if user_signed_in? %>
      <% if current_user.role.name==Guest  %>
        <%= render "layouts/Shared/guest_navbar" %>
      <% elsif current_user.role.name==Developer %>
        <%= render "layouts/Shared/developer_navbar" %>
      <% elsif current_user.role.name==TechnicalLead %>
        <%= render "layouts/Shared/technical_lead_navbar" %>
      <% elsif current_user.role.name==EngineeringManager %>
        <%= render "layouts/Shared/engineering_manager_navbar" %>
      <% elsif current_user.role.name==DirectorGeneral %>
        <%= render "layouts/Shared/director_general_navbar" %>
      <% elsif current_user.role.name==Admin %>
        <%= render "layouts/Shared/admin_navbar" %>
      <%end%>
    <%end%>
    <% if notice %>
      <div class="flex justify-center w-full " id="outtime" style="position:absolute;z-index:1;">
        <div class="flex justify-between text-white shadow-inner rounded p-3 bg-green-300 p-5 w-1/3 ">
          <p ><%= notice %></p>
          <strong class="text-xl align-center cursor-pointer alert-del"
          >&times;</strong
         >
        </div>
      </div>
    <%end%>
    <% if alert %>
      <div class="flex justify-center w-full text-center" id="outtime" style="position:absolute;z-index:1;">
        <div class="flex justify-between text-white shadow-inner rounded p-3 bg-red-300 p-5 w-1/3 ">
          <p class=""><%= alert %></p>
          <strong class="text-xl align-center cursor-pointer alert-del"
          >&times;</strong
         >
        </div>
      </div>
    <%end%>
  </div>
  <%= yield %>

  <%= turbo_frame_tag "modal" %>
  <script>
    setTimeout(()=>{
           $('#outtime').hide();
       },3000);
  </script>
  <script>
    var alert_del = document.querySelectorAll('.alert-del');
    alert_del.forEach((x) =>
      x.addEventListener('click', function () {
        x.parentElement.classList.add('hidden');
      })
    );
  </script>
</body>
</html>
